<p-breadcrumb [model]="breadcrumbItems"></p-breadcrumb>
<div class="tenant-list-container">
  <p-toast></p-toast>
  <p-confirmDialog
    header="Confirmation"
    icon="pi pi-exclamation-triangle"
  ></p-confirmDialog>
  <!-- Filter Panel -->
  <p-accordion>
    <p-accordionTab header="Filters">
      <div class="p-fluid filter-grid">
        <!-- Name Filter -->
        <div class="filter-field1">
          <span class="p-float-label p-input-icon-right">
            <i class="pi pi-times" (click)="resetOneByOneFilters()" *ngIf="filters.sap_cust_code"></i>
            <input
              type="text"
              pInputText
              id="sap_cust_code"
              [(ngModel)]="filters.sap_cust_code"
              (input)="applyFilters()"
            />
            <label for="sap_cust_code">Sap Cust Code</label>
          </span>
        </div>

        <div class="filter-field1">
            <span class="p-float-label p-input-icon-right">
            <i class="pi pi-times" (click)="resetOneByOneFilters()" *ngIf="filters.sap_cust_grp_code"></i>
              <input
                type="text"
                pInputText
                id="customer"
                [(ngModel)]="filters.sap_cust_grp_code"
                (input)="applyFilters()"
              />
              <label for="customer">Sap Cust Grp Code</label>
            </span>
          </div>

          <div class="filter-field1">
            <span class="p-float-label p-input-icon-right">
            <i class="pi pi-times" (click)="resetOneByOneFilters()" *ngIf="filters.CustName"></i>
              <input
                type="text"
                pInputText
                id="customer"
                [(ngModel)]="filters.CustName"
                (input)="applyFilters()"
              />
              <label for="customer">Cust Name</label>
            </span>
          </div>

        <!-- Status Filter -->
        <div class="filter-field1"> <span class="p-float-label">
          <p-dropdown [options]="statusOptions" [(ngModel)]="filters.status" (onChange)="applyFilters()"
            optionLabel="label" optionValue="value" [showClear]="true" id="Status"></p-dropdown>
          <label for="Status">Status</label></span>
      </div>

      <!-- Created From Filter -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">
            <p-calendar id="createdFrom" [(ngModel)]="filters.created_from" (onSelect)="applyFilters()"
              [showIcon]="true" [showClear]="true" (onClear)="resetOneByOneFilters()">
            </p-calendar>
            <label for="createdFrom">Created From</label>
          </span>
        </div>
      </div>

      <!-- Created To Date Filter -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">
            <p-calendar id="createdTo" [(ngModel)]="filters.created_to" (onSelect)="applyFilters()" [showIcon]="true"
              [showClear]="true" (onClear)="resetOneByOneFilters()">
            </p-calendar>
            <label for="Status">Created To</label>
          </span>
        </div>
      </div>

      <!-- Updated From Date Filter -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">
            <p-calendar id="updatedFrom" [(ngModel)]="filters.updated_from" (onSelect)="applyFilters()"
              [showIcon]="true" placeholder="Updated From" [showClear]="true"
              (onClear)="resetOneByOneFilters()"></p-calendar>
            <label for="Status">Updated From</label>
          </span>
        </div>
      </div>

      <!-- Updated From Date Filter -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">
            <p-calendar id="updatedTo" [(ngModel)]="filters.updated_to" (onSelect)="applyFilters()" [showIcon]="true"
              placeholder="Updated To" [showClear]="true" (onClear)="resetOneByOneFilters()"></p-calendar>
            <label for="Status">Updated To</label>
          </span>
        </div>
      </div>

      <!-- Created Sap From Filters-->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">
          <p-calendar
            id="createdSapFrom"
            [(ngModel)]="filters.sap_create_date_from"
            (onSelect)="applyFilters()"
            [showIcon]="true"
            (onClear)="resetOneByOneFilters()"
            [showClear]="true"
          ></p-calendar>
          <label for="createdSapFrom">Created Sap From</label>
        </span> 

        </div>
      </div>

      <!--Created Sap To Filter -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <span class="p-float-label">

          <p-calendar
            id="createdSapTo"
            [(ngModel)]="filters.sap_create_date_to"
            (onSelect)="applyFilters()"
            [showIcon]="true"
            (onClear)="resetOneByOneFilters()"
            [showClear]="true"
          ></p-calendar><label for="createdSapTo">Created Sap To</label></span>
        </div>
      </div>

      <!-- Sort By  Filter -->
      <div class="filter-field1">
        <span class="p-float-label">
          <p-dropdown [options]="sortByOptions" [(ngModel)]="filters.sort_by" (onChange)="applyFilters()"
            optionLabel="label" [showClear]="true" optionValue="value" id="SortBy"></p-dropdown>
          <label for="sort_by">sort_by</label>
        </span>
      </div>

      <!-- Sort Order Filter -->
      <div class="filter-field1">
        <span class="p-float-label">
          <p-dropdown [options]="sortOrderOptions" [(ngModel)]="filters.sort_order" (onChange)="applyFilters()"
            [showClear]="true" optionLabel="label" optionValue="value" id="sort_order"></p-dropdown>
          <label for="sort_order">sort_order</label>
        </span>
      </div>

      <!-- Reset All Filters  -->
      <div class="filter-field1">
        <div class="date-filter-container">
          <button type="button" pButton label="Reset All Filters" (click)="resetAllFilters()"
            icon="pi pi-refresh"></button>
        </div>
      </div>


       

       
       


      



      </div>
    </p-accordionTab>
  </p-accordion>

  <!-- Action icons for CRUD operations -->
  <div class="action-icons">
    <i class="pi pi-plus" (click)="createNewRecord()"></i>
    <i class="pi pi-eye" (click)="viewRecord()"></i>
    <i class="pi pi-pencil" (click)="editRecord()"></i>
    <i class="pi pi-ban" (click)="deactivateRecord()"></i>
    <i class="pi pi-trash" (click)="deleteRecord()"></i>
    <i class="pi pi-file-excel" (click)="exportToExcel()"></i>
  </div>

  <!-- Search and Sort Filters -->
  <div class="filters">
   
  </div>

  <!-- sap_cust_code Table -->
  <p-table
    [value]="customers"
    [paginator]="true"
    [rows]="10"
    [totalRecords]="totalRecords"
    [scrollable]="true"
    scrollHeight="500px"
    scrollWidth="100%"
    [rowsPerPageOptions]="rowsPerPageOptions"
    styleClass="p-datatable-gridlines"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="{first} to {last} of {totalRecords} records"
    [lazy]="true"
    [loading]="loading"
    (onLazyLoad)="loadCustomers($event)"
    selectionMode="single"
    [(selection)]="selectedSapCustCode"
    (onRowSelect)="onRowSelect($event)"
  >
    <ng-template pTemplate="header" >
   <tr>
        <th>Sr.No</th>
        <th>SAP/ERP&nbsp;Cust&nbsp;Code</th>
        <th>TMS&nbsp;Cust&nbsp;Grp&nbsp;Code</th>
        <th>Cost Center</th>
        <th>Cust&nbsp;Name</th>
        <th>Category</th>
        <th>City</th>
        <th>Pin Code</th>
        <th>PAN</th>
        <th>GST No</th>
        <th>Status</th>
        <th>Branch&nbsp;Name</th>
        <th>SAP/ERP Create&nbsp;Date</th>
        <th>Created&nbsp;At</th>
        <th>Updated&nbsp;At</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-customer let-rowIndex="rowIndex">
      <tr [pSelectableRow]="customer">
        <td > {{rowIndex+1}}</td>
        <td>{{ customer.sap_cust_code }}</td>
        <td>{{ customer.sap_cust_grp_code }}</td>
        <td>{{customer.CostCenter}}</td>
        <td>{{ customer.CustName }}</td>
        <td>{{ customer.Category }}</td>
        <td>{{ customer.City }}</td>
        <td>{{ customer.Pincode }}</td>
        <td>{{ customer.PAN }}</td>
        <td>{{ customer.GST_No }}</td>

        <td>
          <ng-container *ngIf="customer.Status === '1'; else deactivate">
            ACTIVE
          </ng-container>
          <ng-template #deactivate>
            DEACTIVATED
          </ng-template>
        </td>
        <td>{{ customer.sap_depot_name}}</td>
        <td>{{ customer.sap_create_date}}</td>
        <td>{{ customer.created_at | date : "medium" }}</td>
        <td>{{ customer.updated_at | date : "medium" }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>



